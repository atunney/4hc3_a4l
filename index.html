<!DOCTYPE html>
<html lang="en">
  <head>
    <link rel="icon" href="./images/A4L_Favicon.png">
    <link rel="stylesheet" href="css/index.css">
    <script src="database/user-database.js"></script>
    <script src="jquery.min.js"></script>
    <script>
      $(document).ready(function() {

        $('#submit').click(function(e) {
            e.preventDefault();

            const success =
            users[$("#username").val()] !== undefined &&
            users[$("#username").val()].password === $("#passwordInput").val();

            if (success) {
                $('.valid').css('display', 'block');
                localStorage.setItem("user", JSON.stringify(users[$("#username").val()]));
                window.location.href = "announcements.html";
            }
            else {
                $('.error').css('display', 'block');
            }
        });
      });
    </script>
    <script type="text/javascript">
      function togglePassword() {
        var x = document.getElementById("passwordInput");
        if (x.type === "password") {
          x.type = "text";
        }
        else {
          x.type = "password";
        }
      }
    </script>
    <title>Avenue4Learning</title>
  </head>

  <body style="background-image: url(./images/login_background.png);">
    <main>
      <h1>Avenue 4 Learning</h1>
      <section class="form">
        <h2>Login To Your Account</h2>
        <p class="valid">Valid. Please wait a moment...</p>
        <p class="error">Error. <br> Please enter a valid username and password.</p>
        <form class="loginbox" autocomplete="off">
          <input placeholder="Username" type="text" required id="username">
          <input placeholder="Password" type="password" required id="passwordInput"><p>Show Password</p>
          <input class = "valid" type="checkbox" onclick="togglePassword()">
          <button id="submit">Login</button>
        </form>
      </section>
    </main>
  </body>
</html>
